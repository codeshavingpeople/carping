<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ItemMapper">
  
   <resultMap type="Item" id="itemResultMap">
      <result property="itemKey" column="ITEM_KEY"/>
      <result property="itemName" column="ITEM_NAME"/>
      <result property="itemPrice" column="ITEM_PRICE"/>
      <result property="itemInfo" column="ITEM_INFO"/>
      <result property="itemImage" column="ITEM_IMAGE"/>
      <result property="itemCategory" column="ITEM_CATEGORY"/>
      <result property="itemRegDate" column="ITEM_REGDATE"/>
   </resultMap>
   
   <select id="selectTentList" resultMap="itemResultMap">
      SELECT * FROM ITEM
      WHERE ITEM_CATEGORY = 'TENT'
   </select>
   
   <select id="getListCount" resultType="int">
      SELECT COUNT(*)
      FROM ITEM
      WHERE ITEM_CATEGORY = 'TENT'
   </select>
   
   <select id="checkItemKey" resultType="int">
		SELECT COUNT(*) 
		FROM CART 
		WHERE ITEM_KEY=#{itemKey} 
		AND MEMBER_ID=#{memberId}
   </select>
      
   	<select id="selectItemDetail" resultMap="itemResultMap">
		SELECT * FROM ITEM
		WHERE ITEM_KEY = #{itemKey}
	</select>
   
	<insert id="insertCart">
      INSERT INTO CART 
      VALUES (
      	SEQ_CKEY.NEXTVAL
      	, #{cartQuantity}
      	, 'N'
      	, SYSDATE
      	, #{itemKey}
      	, #{memberId} 
      )
   </insert>
     <update id="updateCart">
  	 	UPDATE CART 
  	 	SET CART_QUANTITY=#{cartQuantity} 
  	 	WHERE ITEM_KEY=#{itemKey}
   </update>
  
  <select id="searchTent" resultMap="itemResultMap">
      SELECT * FROM ITEM
      WHERE ITEM_NAME LIKE '%' || #{searchValue} || '%'
		 AND ITEM_CATEGORY = 'TENT'
   </select>
</mapper>